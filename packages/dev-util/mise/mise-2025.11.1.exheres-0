# Copyright 2024 David Legrand <david.legrand@clever-cloud.com>
# Distributed under the terms of the GNU General Public License v2

require cargo [ rust_minimum_version=1.88 ]
require github [ user=jdx tag=v${PV} ]

SUMMARY="dev tools, env vars, task runner"
HOMEPAGE="https://mise.jdx.dev/"

LICENCES="MIT"
SLOT="0"
PLATFORMS="~amd64 ~armv8"
MYOPTIONS="providers: ( libressl openssl ) [[ number-selected = exactly-one ]]"

# function of openssl-sys 0.9.110, which is what is specified by the Cargo.lock of mise-2025.10.21.
# See: https://github.com/sfackler/rust-openssl/blob/openssl-sys-v0.9.110/openssl-sys/build/main.rs#L420
DEPENDENCIES="
    build+run:
        providers:libressl? ( dev-libs/libressl:=[>=3.5&<4.2] )
        providers:openssl?  ( dev-libs/openssl:= )
"

# Don't let the openssl-sys crate use a vendored openssl
OPENSSL_NO_VENDOR=1

